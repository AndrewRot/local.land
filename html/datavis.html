<html>
<head>
  <title>Data Vis| local.land</title>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.1.2.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../css/datavis.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

</head>

<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html"><i class="fa fa-globe fa-1x" aria-hidden="true"></i> local.land</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li ><a href="/index.html"><i class="fa fa-home fa-1x" aria-hidden="true"></i> Home</a></li>
        <li><a href="/html/about.html"><i class="fa fa-question-circle fa-1x" aria-hidden="true"></i> About</a></li>
        <li><a href="/html/ambassadors.html"><i class="fa fa-link fa-1x" aria-hidden="true"></i> Ambassadors</a></li>
        <li><a href="/html/contact.html"><i class="fa fa-phone fa-1x" aria-hidden="true"></i> Contact</a></li>
        <li class="active"><a href="#"><i class="fa fa-laptop fa-1x" aria-hidden="true"></i> Data</a></li>
        <li><a href="/html/insta.html"><i class="fa fa-instagram fa-1x" aria-hidden="true"></i> Instafeed</a></li>

      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li id = "status"><a href="#"><i class="fa fa-user fa-1x" aria-hidden="true"></i> Not Logged in
          <fb:login-button scope="public_profile,email,user_about_me,user_location" onlogin="checkLoginState();"> Login
      </fb:login-button>
      </a></li>
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="container" id="visuals">
  <div class="container" id="vis1">
    <div id="chartContainer">
        <!-- <script src="http://d3js.org/d3.v3.min.js"></script> -->
        <!-- <script src="http://dimplejs.org/dist/dimple.v2.1.2.min.js"></script> -->
        <script type="text/javascript">
      var width = document.body.clientWidth;
          var svg = dimple.newSvg("#chartContainer", width, 1000);
          svg.append("text")
            .attr("x", (width*.75)/2+10)
            .attr("y", 15)
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("font-weight", "bold")
            .style("font-family", "Abel")
            .text("Number of Farmer's Markets by State");
          d3.csv("/farm_data/states.csv", function(data) {
              var myChart = new dimple.chart(svg, data);

              myChart.setBounds(25, 30, (width*.75), 870)
              var x = myChart.addCategoryAxis("x", ["State"]);
              x.title = "States"
              var y = myChart.addMeasureAxis("y", "Amount");
              y.title = "Number of Markets"
              var s = myChart.addSeries("State", dimple.plot.bar);
              //s.barGap = 0.05;
              myChart.draw();
          });
        </script>
      </div>
  </div>
  <div class="container" id="vis2">
      <div id="chartContainertwo">
        <!-- <script src="http://d3js.org/d3.v3.min.js"></script> -->
        <!-- <script src="http://dimplejs.org/dist/dimple.v2.1.2.min.js"></script> -->
        <script type="text/javascript">
          var width = document.body.clientWidth;
          var svg2 = dimple.newSvg("#chartContainertwo", width, 1000);
          svg2.append("text")
            .attr("x", (width*.7)/2)
            .attr("y", 15)
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .style("font-weight", "bold")
            .style("font-family", "Abel")
            .text("A Collective Visual: Farmers Markets' by State");
          d3.csv("/farm_data/states.csv", function (data) {
            var myChart2 = new dimple.chart(svg2, data);

            myChart2.setBounds(15, 30, (width*.7), 900)
            myChart2.addMeasureAxis("p", "Amount");
            var ring = myChart2.addSeries("State", dimple.plot.pie);
            ring.innerRadius = "50%";
            myChart2.addLegend((width*.7), 15, 90, 750, "left");
            myChart2.draw();
          });
        </script>
      </div>
  </div>
</div>

<nav class="navbar navbar-inverse navbar-fixed-bottom" id="footer">
  <div class="container-fluid">
    <div class="navbar-header">
      <p class="navbar-text">
          Copyright 2016 ©
          <a href="https://github.com/dmmcmaster" target="_blank" title="Derek's Github">Derek McMaster</a>,
          <a href="https://github.com/Ksbugbee" target="_blank" title="Kurt's Github">Kurt Bugbee</a>,
          <a href="https://github.com/AndrewRot" target="_blank" title="Andrew's Github"> Andrew Rottier</a>
        </p>
    </div>
  </div>
</nav>


<!-- The Modal -->
<div id="myModal" class="modal">

<!-- Modal content -->
<div class="modalcontent">
  <div class="modalheader">
    <span class="close">×</span>
    <div id="modaltitle" >
    <h2>Modal Header</h2>
    </div>
  </div>
  <div id="modalbody">
    <p>Some text in the Modal Body</p>
    <p>Some other text...</p>


  </div>
  <br>

  <div id="fblink">
    <div class="fb-follow" data-href="https://www.facebook.com/zuck" data-layout="standard" data-size="large" data-show-faces="true">TEST</div>
  </div>


  <div id="modalfooter">
    <h3>Modal Footer</h3>


  </div>
</div>
</div>


<script>
// Modal Code
var modal = document.getElementById('myModal');
var modaltitle = document.getElementById('modaltitle');
var modalbody = document.getElementById('modalbody');
var modalfooter = document.getElementById('modalfooter');
var fblink = document.getElementById('fblink');

var url = "https://www.facebook.com/zuck";

//want to dynamically set this
function updateURL(fbpage){
  console.log("CHANGE LINK: "+fbpage);
  url = fbpage;
  $('#fblink').html('<div class="fb-follow" data-href="'+url+'" data-layout="standard" data-size="large" data-show-faces="true">fb</div>');
  //refresh facebook links
  FB.XFBML.parse(document.getElementById('fblink'));

}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
      modal.style.display = "none";
  }
}
</script>


<!-- SCRIPTS -->
<script src="js/stacked.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" ></script>
</body>
</html>
